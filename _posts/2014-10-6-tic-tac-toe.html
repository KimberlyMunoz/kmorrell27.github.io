---
layout: post
title: Tic-Tac-Toe
---
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Tic-Tac-Toe</title>
    <script type="text/javascript">
      var gameBoard = new Array(9);
      // Used by the CPU
      var bestMove;
      var gameStillRunning = true;

      // For Halloween!
      var spookyMode = false;

      var pumpkinHtml = '<img src="/assets/icon_23676.png" class="icon">';

      var skullHtml = '<img src="/assets/icon_34530.png" class="icon">';

      function putX(spaceNum) {
          if (!gameStillRunning) {
              // The game's over. No more moves.
              return;
          }
          if (!gameBoard[spaceNum]) {
              var spaceId = document.getElementById("space" + spaceNum);
              if (!spookyMode) {
                  spaceId.innerHTML = 'X';
              } else {
                  spaceId.innerHTML = skullHtml;
              }
              gameBoard[spaceNum] = 'X';
              var winner = getWinner(gameBoard);
              if (winner == 'X') {
                  var statusSpan = document.getElementById('gameStatusSpan');
                  if (!spookyMode) {
                      statusSpan.innerHTML = 'X wins!';
                  } else {
                      statusSpan.innerHTML = 'Skull wins!';
                  }
                  var resetButton = document.getElementById('resetButton');
                  resetButton.className = 'clouds-flat-button';
                  gameStillRunning = false;
              } else if (winner == 'draw') {
                  var statusSpan = document.getElementById('gameStatusSpan');
                  statusSpan.innerHTML = 'Draw!';
                  var resetButton = document.getElementById('resetButton');
                  resetButton.className = 'clouds-flat-button';
                  gameStillRunning = false;
              } else {
                  // No winner yet, so now it's the computer's turn
                  calculateCircleMove();
              }
          }
      }

      function getWinner(board) {
          // Check for the horizontal win conditions
          if (board[0] == board[1] && board[1] == board[2]) {
              return board[0];
          } else if (board[3] == board[4] && board[4] == board[5]) {
              return board[3];
          } else if (board[6] == board[7] && board[7] == board[8]) {
              return board[6];
              // And the vertical ones
          } else if (board[0] == board[3] && board[3] == board[6]) {
              return board[0];
          } else if (board[1] == board[4] && board[4] == board[7]) {
              return board[1];
          } else if (board[2] == board[5] && board[5] == board[8]) {
              return board[2];
              // And the diagonals
          } else if (board[0] == board[4] && board[4] == board[8]) {
              return board[0];
          } else if (board[2] == board[4] && board[4] == board[6]) {
              return board[2];
          } else {
              // Now let's check for draws.
                  for (var i = 0; i < 9; i++) {
                      if (!board[i]) {
                          // There's an empty space. The game is still ongoing.
                          return '';
                      }
                  }
              // If we made it to the end, the board is full and it's a draw.
              return 'draw';
          }
      }

      function calculateCircleMove() {
          minimax(gameBoard, 'O', 0);
          gameBoard[bestMove] = 'O';
          var spaceId = document.getElementById('space' + bestMove);
          if (!spookyMode) {
              spaceId.innerHTML = 'O';
          } else {
              spaceId.innerHTML = pumpkinHtml;
          }
          if (getWinner(gameBoard) == 'O') {
              var statusSpan = document.getElementById('gameStatusSpan');
              if (!spookyMode) {
                  statusSpan.innerHTML = 'O wins!';
              } else {
                  statusSpan.innerHTML = 'Pumpkin wins!';
              }
              var resetButton = document.getElementById('resetButton');
              resetButton.className = 'clouds-flat-button';
              gameStillRunning = false;
          }
      }

      function minimax(minimaxBoard, currentPlayer, depth) {
          var winner = getWinner(minimaxBoard);
          if (winner == 'X') {
              return -10;
          } else if (winner == 'O') {
              return 10;
          } else if (winner == 'draw') {
              return 0;
          } else if (currentPlayer == 'O') {
              var maxValue = -100;
              for (var i = 0; i < 9; i++) {
                  if (!minimaxBoard[i]) {
                      // There's a valid move here.
                      var newBoard = minimaxBoard.slice(0);
                      newBoard[i] = 'O';
                      var result = minimax(newBoard, 'X', depth + 1);
                      if (result > maxValue) {
                          maxValue = result;
                          // We're only interested in the best next move, not
                          // one 6 moves down the line.
                          if (depth == 0) {
                              bestMove = i;
                          }
                      }
                  }
              }
              return maxValue;
          } else if (currentPlayer == 'X') {
              var minValue = 100;
              for (var i = 0; i < 9; i++) {
                  if (!minimaxBoard[i]) {
                      // There's a valid move here.
                      var newBoard = minimaxBoard.slice(0);
                      newBoard[i] = 'X';
                      var result = minimax(newBoard, 'O', depth + 1);
                      if (result < minValue) {
                          minValue = result;
                      }
                  }
              }
              return minValue;
          }
      }

      function resetGame() {
          gameBoard = new Array(9);
          for (var i = 0; i < 9; i++) {
              var spaceEl = document.getElementById('space' + i);
              spaceEl.innerHTML = '';
          }

          var resetButton = document.getElementById('resetButton');
          resetButton.className = 'hidden';

          var gameStatusSpan = document.getElementById('gameStatusSpan');
          gameStatusSpan.innerHTML = '';

          // And allow the game to be played again
          gameStillRunning = true;
      }

      function spookyToggle() {
          for (var i = 0; i < 9; i++) {
              var spaceEl = document.getElementById('space' + i);
              if (!spookyMode) {
                  if (spaceEl.innerHTML == 'X') {
                      spaceEl.innerHTML = skullHtml;
                  } else if (spaceEl.innerHTML == 'O') {
                      spaceEl.innerHTML = pumpkinHtml;
                  }
              } else {
                  if (spaceEl.innerHTML.indexOf('icon_34530') > -1) {
                      spaceEl.innerHTML = 'X';
                  } else if (spaceEl.innerHTML.indexOf('icon_23676') > -1) {
                      spaceEl.innerHTML = 'O';
                  }
              }
          }
          spookyMode = !spookyMode;
      }
    </script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <style type="text/css">
      div.board {
          height: 310px;
          width: 310px;
          background-color: #888888;
      }
      div.row {
          height: 105px;
      }
      a.button {
          float: left;
          background-color: white;
          text-decoration: none;
          margin-right: 5px;
          height: 100px;
          width: 100px;
          font-family:'Open Sans', sans-serif;
          font-size: 80px;
          color: black;
          text-align: center;
          line-height: 1em;
      }
      a.right {
          margin-right: 0;
      }
      div.statusDiv {
          background-color: #cccccc;
          border: 1px solid;
          height: 90px;
          margin: 20px 0;
          padding: 20px;
          text-align: center;
          width: 270px;
      }
      .hidden {
          display:none;
      }
      .resetButton {
          display:block;
          margin: 0 auto;

      }

      .icon {
          height: 80px;
          width: 80px;
      }

      /* From http://cssdeck.com/labs/beautiful-flat-buttons */
      .clouds-flat-button {
          position: relative;
          vertical-align: top;
          width: 100%;
          height: 60px;
          padding: 0;
          font-size: 22px;
          color:#454545;
          text-align: center;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.25);
          background: #ecf0f1;
          border: 0;
          border-bottom: 2px solid #dadedf;
          cursor: pointer;
          -webkit-box-shadow: inset 0 -2px #dadedf;
          box-shadow: inset 0 -2px #dadedf;
      }

      .clouds-flat-button:active {
          top: 1px;
          outline: none;
          -webkit-box-shadow: none;
          box-shadow: none;
      }

      .pumpkin-flat-button {
          position: relative;
          vertical-align: top;
          width: 310px;
          height: 60px;
          padding: 0;
          font-size: 22px;
          color: white;
          text-align: center;
          text-shadow: 0 1px 2px rgba(0, 0, 0, 0.25);
          background: #d35400;
          border: 0;
          border-bottom: 2px solid #c54e00;
          cursor: pointer;
          -webkit-box-shadow: inset 0 -2px #c54e00;
          box-shadow: inset 0 -2px #c54e00;
      }
      .pumpkin-flat-button:active {
          top: 1px;
          outline: none;
          -webkit-box-shadow: none;
          box-shadow: none;
      }
    </style>
  </head>

  <body>
    <p>Click anywhere to start!</p>
    <div class="board">
      <div class="row">
        <a href="" id="space0" class="button" onclick="putX(0); return false;"></a>
        <a href="" id="space1" class="button" onclick="putX(1); return false;"></a>
        <a href="" id="space2" class="button right" onclick="putX(2); return false;"></a>
      </div>
      <div class="row">
        <a href="" id="space3" class="button" onclick="putX(3); return false;"></a>
        <a href="" id="space4" class="button" onclick="putX(4); return false;"></a>
        <a href="" id="space5" class="button right" onclick="putX(5); return false;"></a>
      </div>
      <div class="row">
        <a href="" id="space6" class="button" onclick="putX(6); return false;"></a>
        <a href="" id="space7" class="button" onclick="putX(7); return false;"></a>
        <a href="" id="space8" class="button right" onclick="putX(8); return false;"></a>
      </div>
    </div>
    <div class="statusDiv">
      <span id="gameStatusSpan"></span>
      <button id="resetButton" onclick="resetGame()" class="hidden">Try again</button>
    </div>
    <button id="spookyMode" class="pumpkin-flat-button" onclick="spookyToggle()">Toggle spooky mode</button>
    <p>Skull designed by <a href="http://www.thenounproject.com/SuperAtic">SuperAtic LABS</a> from the <a href="http://www.thenounproject.com">Noun Project</a></p>
    <p>Jack O Lantern designed by <a href="http://www.thenounproject.com/coexsystem">John Leonard</a> from the <a href="http://www.thenounproject.com">Noun Project</a></p>
  </body>
</html>
